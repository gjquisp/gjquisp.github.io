define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(t,e,n,i){function r(n){return function(i,r){"string"!=typeof i&&(r=i,i="*");var s,o=0,a=i.toLowerCase().match(e)||[];if(t.isFunction(r))for(;s=a[o++];)"+"===s[0]?(s=s.slice(1)||"*",(n[s]=n[s]||[]).unshift(r)):(n[s]=n[s]||[]).push(r)}}function s(e,n,i,r){function s(l){var c;return o[l]=!0,t.each(e[l]||[],function(t,e){var l=e(n,i,r);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(n.dataTypes.unshift(l),s(l),!1)}),c}var o={},a=e===b;return s(n.dataTypes[0])||!o["*"]&&s("*")}function o(e,n){var i,r,s=t.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&t.extend(!0,e,r),e}function a(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function l(t,e,n,i){var r,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(r in c)if(a=r.split(" "),a[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[r]:c[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}var c,u,d=/#.*$/,f=/([?&])_=[^&]*/,p=/^(.*?):[ \t]*([^\r\n]*)$/gm,h=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,g=/^(?:GET|HEAD)$/,m=/^\/\//,v=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,y={},b={},_="*/".concat("*");try{u=location.href}catch(x){u=document.createElement("a"),u.href="",u=u.href}return c=v.exec(u.toLowerCase())||[],t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:u,type:"GET",isLocal:h.test(c[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?o(o(e,t.ajaxSettings),n):o(t.ajaxSettings,e)},ajaxPrefilter:r(y),ajaxTransport:r(b),ajax:function(r,o){function h(e,n,i,r){var s,o,c,u,d,f=n;2!==L&&(L=2,T&&clearTimeout(T),x=void 0,k=r||"",O.readyState=e>0?4:0,s=e>=200&&300>e||304===e,i&&(u=a(F,O,i)),u=l(F,u,O,s),s?(F.ifModified&&(d=O.getResponseHeader("Last-Modified"),d&&(t.lastModified[w]=d),d=O.getResponseHeader("etag"),d&&(t.etag[w]=d)),204===e||"HEAD"===F.type?f="nocontent":304===e?f="notmodified":(f=u.state,o=u.data,c=u.error,s=!c)):(c=f,(e||!f)&&(f="error",0>e&&(e=0))),O.status=e,O.statusText=(n||f)+"",s?M.resolveWith(j,[o,f,O]):M.rejectWith(j,[O,f,c]),O.statusCode(q),q=void 0,E&&N.trigger(s?"ajaxSuccess":"ajaxError",[O,F,s?o:c]),D.fireWith(j,[O,f]),E&&(N.trigger("ajaxComplete",[O,F]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof r&&(o=r,r=void 0),o=o||{};var x,w,k,C,T,S,E,A,F=t.ajaxSetup({},o),j=F.context||F,N=F.context&&(j.nodeType||j.jquery)?t(j):t.event,M=t.Deferred(),D=t.Callbacks("once memory"),q=F.statusCode||{},z={},$={},L=0,H="canceled",O={readyState:0,getResponseHeader:function(t){var e;if(2===L){if(!C)for(C={};e=p.exec(k);)C[e[1].toLowerCase()]=e[2];e=C[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===L?k:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return L||(t=$[n]=$[n]||t,z[t]=e),this},overrideMimeType:function(t){return L||(F.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>L)for(e in t)q[e]=[q[e],t[e]];else O.always(t[O.status]);return this},abort:function(t){var e=t||H;return x&&x.abort(e),h(0,e),this}};if(M.promise(O).complete=D.add,O.success=O.done,O.error=O.fail,F.url=((r||F.url||u)+"").replace(d,"").replace(m,c[1]+"//"),F.type=o.method||o.type||F.method||F.type,F.dataTypes=t.trim(F.dataType||"*").toLowerCase().match(e)||[""],null==F.crossDomain&&(S=v.exec(F.url.toLowerCase()),F.crossDomain=!(!S||S[1]===c[1]&&S[2]===c[2]&&(S[3]||("http:"===S[1]?"80":"443"))===(c[3]||("http:"===c[1]?"80":"443")))),F.data&&F.processData&&"string"!=typeof F.data&&(F.data=t.param(F.data,F.traditional)),s(y,F,o,O),2===L)return O;E=F.global,E&&0===t.active++&&t.event.trigger("ajaxStart"),F.type=F.type.toUpperCase(),F.hasContent=!g.test(F.type),w=F.url,F.hasContent||(F.data&&(w=F.url+=(i.test(w)?"&":"?")+F.data,delete F.data),F.cache===!1&&(F.url=f.test(w)?w.replace(f,"$1_="+n++):w+(i.test(w)?"&":"?")+"_="+n++)),F.ifModified&&(t.lastModified[w]&&O.setRequestHeader("If-Modified-Since",t.lastModified[w]),t.etag[w]&&O.setRequestHeader("If-None-Match",t.etag[w])),(F.data&&F.hasContent&&F.contentType!==!1||o.contentType)&&O.setRequestHeader("Content-Type",F.contentType),O.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+("*"!==F.dataTypes[0]?", "+_+"; q=0.01":""):F.accepts["*"]);for(A in F.headers)O.setRequestHeader(A,F.headers[A]);if(F.beforeSend&&(F.beforeSend.call(j,O,F)===!1||2===L))return O.abort();H="abort";for(A in{success:1,error:1,complete:1})O[A](F[A]);if(x=s(b,F,o,O)){O.readyState=1,E&&N.trigger("ajaxSend",[O,F]),F.async&&F.timeout>0&&(T=setTimeout(function(){O.abort("timeout")},F.timeout));try{L=1,x.send(z,h)}catch(P){if(!(2>L))throw P;h(-1,P)}}else h(-1,"No Transport");return O},getJSON:function(e,n,i){return t.get(e,n,i,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,i,r,s){return t.isFunction(i)&&(s=s||r,r=i,i=void 0),t.ajax({url:e,type:n,dataType:s,data:i,success:r})}}),t.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,n){t.fn[n]=function(t){return this.on(n,t)}}),t});